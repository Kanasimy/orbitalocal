(function(){BX.namespace("BX.Landing");var a=BX.Landing.Utils.style;var b=BX.Landing.Utils.addClass;var c=BX.Landing.Utils.removeClass;BX.Landing.BlockHeaderEntry=function(e){this.headerNode=e;this.wrapperNode=e.parentNode;this.fixMomentNodes=this.headerNode.querySelectorAll(BX.Landing.BlockHeaderEntry.FIX_MOMENT_SELECTOR);this.hiddenSectionsNodes=this.headerNode.querySelectorAll(BX.Landing.BlockHeaderEntry.SECTION_HIDDEN_SELECTOR);this.mode=this.getMode();this.prevState=0;var d=document.querySelector(".landing-pub-top-panel-wrapper");this.headerOffset=d?d.offsetHeight:0};BX.Landing.BlockHeaderEntry.HEADER_SELECTOR=".u-header";BX.Landing.BlockHeaderEntry.SECTION_HIDDEN_SELECTOR=".u-header__section--hidden";BX.Landing.BlockHeaderEntry.FIX_MOMENT_SELECTOR="[data-header-fix-moment-classes], [data-header-fix-moment-exclude]";BX.Landing.BlockHeaderEntry.STATE_IN_FLOW=10;BX.Landing.BlockHeaderEntry.STATE_ON_TOP=20;BX.Landing.BlockHeaderEntry.STATE_FIX_MOMENT=30;BX.Landing.BlockHeaderEntry.DIRECTION_TOP_TO_BOTTOM=1;BX.Landing.BlockHeaderEntry.DIRECTION_BOTTOM_TO_TOP=-1;BX.Landing.BlockHeaderEntry.THRESHOLD_FULL=1;BX.Landing.BlockHeaderEntry.STICKY_CLASS="u-header--sticky";BX.Landing.BlockHeaderEntry.FLOAT_CLASS="u-header--float";BX.Landing.BlockHeaderEntry.MODE_STICKY=10;BX.Landing.BlockHeaderEntry.MODE_STICKY_RELATIVE=20;BX.Landing.BlockHeaderEntry.MODE_STATIC=30;BX.Landing.BlockHeaderEntry.FIX_MOMENT_CLASSES=["js-header-fix-moment"];BX.Landing.BlockHeaderEntry.FIX_MOMENT_ADD_DATA="header-fix-moment-classes";BX.Landing.BlockHeaderEntry.FIX_MOMENT_REMOVE_DATA="header-fix-moment-exclude";BX.Landing.BlockHeaderEntry.getHeaderNodeByWrapper=function(d){return d.querySelector(BX.Landing.BlockHeaderEntry.HEADER_SELECTOR)};BX.Landing.BlockHeaderEntry.prototype={getNodeForObserve:function(){return this.wrapperNode},getMode:function(){if(BX.hasClass(this.headerNode,BX.Landing.BlockHeaderEntry.STICKY_CLASS)){if(BX.hasClass(this.headerNode,BX.Landing.BlockHeaderEntry.FLOAT_CLASS)){return BX.Landing.BlockHeaderEntry.MODE_STICKY}return BX.Landing.BlockHeaderEntry.MODE_STICKY_RELATIVE}return BX.Landing.BlockHeaderEntry.MODE_STATIC},getCurrentState:function(d){if(d.isIntersecting){if(!this.isOnTop(d)){return BX.Landing.BlockHeaderEntry.STATE_IN_FLOW}else{if(d.intersectionRatio===BX.Landing.BlockHeaderEntry.THRESHOLD_FULL){return BX.Landing.BlockHeaderEntry.STATE_IN_FLOW}else{if(d.intersectionRatio<BX.Landing.BlockHeaderEntry.THRESHOLD_FULL){return BX.Landing.BlockHeaderEntry.STATE_ON_TOP}}}}else{if(!this.isOnTop(d)){return BX.Landing.BlockHeaderEntry.STATE_IN_FLOW}else{return BX.Landing.BlockHeaderEntry.STATE_FIX_MOMENT}}},isOnTop:function(d){return d.boundingClientRect.top<=0},getDirection:function(d){if(this.prevState===null){return 0}if(d>this.prevState){return BX.Landing.BlockHeaderEntry.DIRECTION_TOP_TO_BOTTOM}return BX.Landing.BlockHeaderEntry.DIRECTION_BOTTOM_TO_TOP},isOverScreen:function(d){return d.boundingClientRect.height>=d.rootBounds.height},setInFlow:function(){if(this.mode===BX.Landing.BlockHeaderEntry.MODE_STICKY){void a(this.headerNode,{position:"absolute",top:0,left:0,right:0})}else{if(this.mode===BX.Landing.BlockHeaderEntry.MODE_STICKY_RELATIVE){void a(this.wrapperNode,{height:"auto"});void a(this.headerNode,{position:"relative",top:0,left:0,right:0})}}},setOnTop:function(){if(this.mode===BX.Landing.BlockHeaderEntry.MODE_STICKY_RELATIVE){void a(this.wrapperNode,{height:this.wrapperNode.offsetHeight+"px"})}void a(this.headerNode,{position:"fixed",top:this.headerOffset+"px",left:0,right:0})},setFixMoment:function(){b(this.headerNode,BX.Landing.BlockHeaderEntry.FIX_MOMENT_CLASSES);this.fixMomentNodes.forEach(function(f){var e=BX.data(f,BX.Landing.BlockHeaderEntry.FIX_MOMENT_ADD_DATA);if(e!==undefined){b(f,e.split(" "))}var d=BX.data(f,BX.Landing.BlockHeaderEntry.FIX_MOMENT_REMOVE_DATA);if(d!==undefined){c(f,d.split(" "))}});this.hideSections()},unsetFixMoment:function(){c(this.headerNode,BX.Landing.BlockHeaderEntry.FIX_MOMENT_CLASSES);this.fixMomentNodes.forEach(function(f){var d=BX.data(f,BX.Landing.BlockHeaderEntry.FIX_MOMENT_ADD_DATA);if(d!==undefined){c(f,d.split(" "))}var e=BX.data(f,BX.Landing.BlockHeaderEntry.FIX_MOMENT_REMOVE_DATA);if(e!==undefined){b(f,e.split(" "))}});this.showSections()},hideSections:function(){this.hiddenSectionsNodes.forEach(function(d){d.style.setProperty("height",0);d.style.setProperty("border","none","important");d.style.setProperty("overflow","hidden");d.style.setProperty("padding",0,"important")})},showSections:function(){this.hiddenSectionsNodes.forEach(function(d){d.style.removeProperty("height");d.style.removeProperty("border");d.style.removeProperty("overflow");d.style.removeProperty("padding")})}};BX.Landing.BlockHeaderEntry.onIntersection=function(d){d.forEach(function(f){var e=BX.Landing.BlockHeaders.getInstance();var i=e.getEntryByIntersectionTarget(f.target);if(i.mode===BX.Landing.BlockHeaderEntry.MODE_STATIC){return}var g=i.getCurrentState(f);if(g!==i.prevState){if(g===BX.Landing.BlockHeaderEntry.STATE_IN_FLOW){i.setInFlow()}else{if(g===BX.Landing.BlockHeaderEntry.STATE_ON_TOP){i.setOnTop()}else{if(g===BX.Landing.BlockHeaderEntry.STATE_FIX_MOMENT){if(i.prevState<BX.Landing.BlockHeaderEntry.STATE_ON_TOP){i.setOnTop()}i.setFixMoment()}}}var h=i.getDirection(g);if(h<0&&g<BX.Landing.BlockHeaderEntry.STATE_FIX_MOMENT){i.unsetFixMoment()}i.prevState=g}else{if(i.isOverScreen(f)){i.wrapperNode.scrollIntoView({behavior:"smooth"});i.setOnTop();i.prevState=BX.Landing.BlockHeaderEntry.STATE_ON_TOP}}})}})();