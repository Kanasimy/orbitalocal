(function(b){b.HSCore.components.HSScrollNav={_baseConfig:{duration:400,easing:"linear",over:b(),activeItemClass:"active",afterShow:function(){},beforeShow:function(){}},_pageCollection:b(),init:function(d,g){var f=this;if(!d||!d.length){return b()}d.each(function(l,k){var i=b(k),j=g&&b.isPlainObject(g)?b.extend(true,{},f._baseConfig,g,i.data()):b.extend(true,{},f._baseConfig,i.data());if(!i.data("HSScrollNav")){i.data("HSScrollNav",new a(i,j));f._pageCollection=f._pageCollection.add(i)}});b(window).on("scroll.HSScrollNav",function(){f._pageCollection.each(function(h,j){if(b.contains(document,j)){b(j).data("HSScrollNav").highlight()}})}).trigger("scroll.HSScrollNav");return d}};function a(d,f){this.element=d;this.config=f;this._items=b();this._makeItems();this._bindEvents()}a.prototype._makeItems=function(){var d=this;this.element.find('a[href*="#"]').filter(function(g,f){var h=f.getAttribute("href").split("#")[1];return !!document.getElementById(h)}).each(function(g,f){var e=b(f);if(!e.data("HSScrollNavSection")){e.data("HSScrollNavSection",new c(e,d.config));d._items=d._items.add(e)}})};a.prototype._bindEvents=function(){var d=this;this.element.on("click.HSScrollNav",'a[href*="#"]',function(f){var g=this;d._lockHightlight=true;if(d.current){d.current.unhighlight()}g.blur();d.current=b(g).data("HSScrollNavSection");if(d.current){d.current.highlight();b(this).data("HSScrollNavSection").show(function(){d._lockHightlight=false});f.preventDefault()}})};a.prototype.highlight=function(){var d=this,g,j,h,f;if(!this._items.length||this._lockHightlight){return}f=b(window).scrollTop();if(f+b(window).height()===b(document).height()){this.current=this._items.last().data("HSScrollNavSection");this.unhighlight();this.current.highlight();this.current.changeHash();return}this._items.each(function(l,m){var o=b(m).data("HSScrollNavSection"),k=o.section;if(f>=o.offset){h=o}});if(h&&this.current!=h){this.unhighlight();h.highlight();if(this.current){h.changeHash()}this.current=h}};a.prototype.unhighlight=function(){this._items.each(function(d,f){b(f).data("HSScrollNavSection").unhighlight()})};function c(d,f){var g=this;this.element=d;this.config=f;Object.defineProperty(this,"section",{value:b("#"+g.element.attr("href").split("#")[1])});Object.defineProperty(this,"offset",{get:function(){var k=b(".u-header, header");if(k.length>0){var n=k.outerHeight(),p=getComputedStyle(k.get(0)),m=p.position,j=g.section.offset().top,l=parseInt(p.top),q=parseInt(p.marginTop)}else{var n=0,m="fixed",j=g.section.offset().top,l=0,q=0}if(m=="fixed"&&l==0){j=j-n-q}if(g.config.over.length){j=j-g.config.over.outerHeight()}return j}})}c.prototype.show=function(d){var f=this;if(!this.section.length){return}f.config.beforeShow.call(f.section);this.changeHash();b("html, body").stop().animate({scrollTop:f.offset+3},{duration:f.config.duration,easing:f.config.easing,complete:function(){b("html, body").stop().animate({scrollTop:f.offset+3},{duration:f.config.duration,easing:f.config.easing,complete:function(){f.config.afterShow.call(f.section);if(b.isFunction(d)){d()}}})}})};c.prototype.changeHash=function(){this.section.attr("id","");this.section.attr("id",this.element.attr("href").split("#")[1])};c.prototype.highlight=function(){var d=this.element.parent("li");if(d.length){d.addClass(this.config.activeItemClass)}};c.prototype.unhighlight=function(){var d=this.element.parent("li");if(d.length){d.removeClass(this.config.activeItemClass)}}})(jQuery);